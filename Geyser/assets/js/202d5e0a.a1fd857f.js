"use strict";(self.webpackChunkgeyser_wiki=self.webpackChunkgeyser_wiki||[]).push([[5864],{64408:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>l});var n=a(3715),r=a(74848),i=a(28453);const s={title:"Geyser Available for Java 1.20.5/1.20.6",slug:"geyser-1-20-5",authors:"Camotoy",hide_table_of_contents:!1,description:"Support for Java 1.20.5 and 1.20.6 has been released"},o=void 0,c={authorsImageUrls:[void 0]},l=[{value:"New: item components",id:"new-item-components",level:2},{value:"NBT refactor",id:"nbt-refactor",level:2},{value:"Better tag extensibility",id:"better-tag-extensibility",level:2},{value:"No more trim recipe hardcoding",id:"no-more-trim-recipe-hardcoding",level:2},{value:"Entity properties",id:"entity-properties",level:2},{value:"Special Thanks",id:"special-thanks",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Support for Java 1.20.5 and 1.20.6 has been released. Thank you for your patience as we work on the update!"}),"\n",(0,r.jsx)(t.h2,{id:"new-item-components",children:"New: item components"}),"\n",(0,r.jsx)(t.p,{children:"Gone is the item NBT to serialize extra data over the network. 1.20.5 introduces data components, which replaces the guesswork of NBT with strict objects attached to each class."}),"\n",(0,r.jsx)(t.p,{children:"We\u2019ve also been able to get rid of unreachable code from before the server inventory rewrite, back when creative mode Bedrock had the potential ability to delete NBT from items just from moving them around."}),"\n",(0,r.jsx)(t.h2,{id:"nbt-refactor",children:"NBT refactor"}),"\n",(0,r.jsxs)(t.p,{children:["Since items no longer have NBT, we decided it was a good time to switch to using one NBT library. Our Bedrock protocol library used ",(0,r.jsx)(t.a,{href:"https://github.com/CloudburstMC/NBT",children:"Cloudburst\u2019s NBT implementation"}),", whereas our Java protocol library used OpenNBT. The latter has been severely neglected, and still has several cases of weird or outdated implementations, such as tag names being present in tag value objects. The entire project now uses Cloudburst\u2019s NBT library, which is far nicer to use overall:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'boolean piglinSafe = ((Number) dimension.get("piglin_safe").getValue()).byteValue() != (byte) 0;\n'})}),"\n",(0,r.jsx)(t.p,{children:"Changes to:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'boolean piglinSafe = dimension.getBoolean("piglin_safe");\n'})}),"\n",(0,r.jsx)(t.h2,{id:"better-tag-extensibility",children:"Better tag extensibility"}),"\n",(0,r.jsxs)(t.p,{children:["Block and item tags are now enums - this example diff to add support for ",(0,r.jsx)(t.em,{children:"one"})," tag\u2026"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Tag Enums",src:a(80478).A+"",width:"779",height:"784"})}),"\n",(0,r.jsxs)(t.p,{children:["\u2026would now be adding one line of a new enum in ",(0,r.jsx)(t.a,{href:"https://github.com/GeyserMC/Geyser/blob/8b7b8cdffdb7aba97ef817037859d1151f4b2665/core/src/main/java/org/geysermc/geyser/session/cache/tags/ItemTag.java",children:"the ItemTag class"}),". And we had to add a handful of enums to add support for ",(0,r.jsx)(t.a,{href:"https://github.com/GeyserMC/Geyser/commit/59a2c0dc02abacd00fe3a72788cc9317c891557e",children:"data-driven animal loved foods"}),"... imagine the complexity with the first style of code!"]}),"\n",(0,r.jsx)(t.h2,{id:"no-more-trim-recipe-hardcoding",children:"No more trim recipe hardcoding"}),"\n",(0,r.jsx)(t.p,{children:"Because the server now sends all trim recipes through a packet as a registry, we\u2019re able to get rid of this block of code that was required for trim recipes to be handled. Yay to no hardcoding!"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Trim Recipes",src:a(68925).A+"",width:"805",height:"454"})}),"\n",(0,r.jsx)(t.h2,{id:"entity-properties",children:"Entity properties"}),"\n",(0,r.jsxs)(t.p,{children:["Bedrock\u2019s newer ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/minecraft/creator/documents/introductiontoentityproperties?view=minecraft-bedrock-stable",children:"entity property system"})," has now found a use in vanilla Bedrock - it controls the armadillo\u2019s animation state (and without it, an armadillo will default to staying inside its shell!). ",(0,r.jsx)(t.a,{href:"https://github.com/Kas-tle",children:"Kastle"})," came through and ",(0,r.jsx)(t.a,{href:"https://github.com/GeyserMC/Geyser/commit/99e6a2981da27a9ec8f09c04cfc8e73a296e4263",children:"ported some work-in-progress code"})," so Geyser is able to work with the new system."]}),"\n",(0,r.jsx)(t.h2,{id:"special-thanks",children:"Special Thanks"}),"\n",(0,r.jsx)(t.p,{children:"This update would have been a nightmare without the many hands we had to help implement everything we needed to get done."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/basaigh",children:"basaigh"})," implemented the huge item changes in MCProtocolLib in a very timely fashion, meaning that Geyser could get right to updating its own code."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/AJ-Ferguson",children:"AJ Ferguson"})," and ",(0,r.jsx)(t.a,{href:"https://github.com/onebeastchris",children:"Chris"})," both helped with implementing new features and fixing regressions."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/Kas-tle",children:"Kastle"}),", hot off the heels of stronger security protections on the Bedrock side, assisted with custom skull reimplementation and entity properties implementation."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},80478:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/tag-enums-e4df8eb58d85c66a227d08107afc9ec5.png"},68925:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/trim-recipes-4c04f2b35989ba4ef8096e08dfe4c020.png"},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>o});var n=a(96540);const r={},i=n.createContext(r);function s(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:t},e.children)}},3715:e=>{e.exports=JSON.parse('{"permalink":"/blog/geyser-1-20-5","source":"@site/blog/2024-05-02-geyser-1-20-5.md","title":"Geyser Available for Java 1.20.5/1.20.6","description":"Support for Java 1.20.5 and 1.20.6 has been released","date":"2024-05-02T00:00:00.000Z","tags":[],"readingTime":2.165,"hasTruncateMarker":true,"authors":[{"name":"Camotoy","title":"Project Lead","url":"https://github.com/Camotoy","imageURL":"https://github.com/Camotoy.png","key":"Camotoy","page":null}],"frontMatter":{"title":"Geyser Available for Java 1.20.5/1.20.6","slug":"geyser-1-20-5","authors":"Camotoy","hide_table_of_contents":false,"description":"Support for Java 1.20.5 and 1.20.6 has been released"},"unlisted":false,"prevItem":{"title":"RakNet Amplification Attack Summary and Response","permalink":"/blog/raknet-amplification-attack"},"nextItem":{"title":"Four Years of Geyser","permalink":"/blog/four-years-of-geyser"}}')}}]);