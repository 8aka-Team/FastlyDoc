"use strict";(self.webpackChunkgeyser_wiki=self.webpackChunkgeyser_wiki||[]).push([[3792],{56198:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"floodgate/issues","title":"Issues","description":"Troubleshoot common Floodgate issues. Get solutions for connection problems, configuration errors, and known limitations.","source":"@site/wiki/floodgate/issues.md","sourceDirName":"floodgate","slug":"/floodgate/issues","permalink":"/wiki/floodgate/issues","draft":false,"unlisted":false,"editUrl":"https://github.com/GeyserMC/GeyserWebsite/tree/master/wiki/floodgate/issues.md","tags":[],"version":"current","frontMatter":{"title":"Issues","description":"Troubleshoot common Floodgate issues. Get solutions for connection problems, configuration errors, and known limitations."},"sidebar":"floodgateSidebar","previous":{"title":"Floodgate Setup","permalink":"/wiki/floodgate/setup"},"next":{"title":"FAQ","permalink":"/wiki/floodgate/faq"}}');var i=o(74848),r=o(28453);const s={title:"Issues",description:"Troubleshoot common Floodgate issues. Get solutions for connection problems, configuration errors, and known limitations."},a="Known Issues & Caveats",l={},d=[{value:"Running commands",id:"running-commands",level:2},{value:"If you wish to use IP forwarding, please enable it in your BungeeCord config as well!",id:"if-you-wish-to-use-ip-forwarding-please-enable-it-in-your-bungeecord-config-as-well",level:2},{value:"<code>java.lang.IllegalStateException: Cannot reply to EncryptionRequestPacket without profile and access token.</code>",id:"javalangillegalstateexception-cannot-reply-to-encryptionrequestpacket-without-profile-and-access-token",level:2},{value:"<code>javax.crypto.AEADBadTagException: Tag mismatch!</code>",id:"javaxcryptoaeadbadtagexception-tag-mismatch",level:2},{value:"java.lang.NumberFormatException: For input string: &quot;&quot;",id:"javalangnumberformatexception-for-input-string-",level:2},{value:"Geyser-Floodgate:51777 lost connection: Internal Exception: java.lang.NumberFormatException: For input string: &quot;SfqdXv36&quot; (or a similar error)",id:"geyser-floodgate51777-lost-connection-internal-exception-javalangnumberformatexception-for-input-string-sfqdxv36-or-a-similar-error",level:2},{value:"&quot;Please connect through the official Geyser&quot; disconnect message",id:"please-connect-through-the-official-geyser-disconnect-message",level:2},{value:"Prefix is not changing on the server after changing it in the config.",id:"prefix-is-not-changing-on-the-server-after-changing-it-in-the-config",level:2},{value:"Issues with LuckPerms and prefixes",id:"issues-with-luckperms-and-prefixes",level:2},{value:"Failed to verify username! (with Paper)",id:"failed-to-verify-username-with-paper",level:2},{value:"Error with Forge or Fabric Bukkit Hybrid",id:"error-with-forge-or-fabric-bukkit-hybrid",level:2},{value:"After enabling global linking in offline mode, player data is not synced between Java and Bedrock players.",id:"after-enabling-global-linking-in-offline-mode-player-data-is-not-synced-between-java-and-bedrock-players",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"known-issues--caveats",children:"Known Issues & Caveats"})}),"\n",(0,i.jsxs)(n.p,{children:["If an issue you're experiencing is not listed here, please consider joining the Geyser ",(0,i.jsx)(n.a,{href:"http://discord.geyser.fastly.8aka.cn/",children:"Discord"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"running-commands",children:"Running commands"}),"\n",(0,i.jsxs)(n.p,{children:["In some instances, like if you have the ",(0,i.jsx)(n.code,{children:"username-prefix"})," set to ",(0,i.jsx)(n.code,{children:"*"}),", you may need to wrap the Bedrock player's username in quotes; for example: ",(0,i.jsx)(n.code,{children:'/tp "*BedrockPlayer"'}),". Setting the prefix to ",(0,i.jsx)(n.code,{children:"."})," should also fix this."]}),"\n",(0,i.jsx)(n.h2,{id:"if-you-wish-to-use-ip-forwarding-please-enable-it-in-your-bungeecord-config-as-well",children:"If you wish to use IP forwarding, please enable it in your BungeeCord config as well!"}),"\n",(0,i.jsxs)(n.p,{children:["It is likely you have enabled ",(0,i.jsx)(n.code,{children:"send-floodgate-data"})," in your Floodgate config but either Floodgate isn't installed on the target server, or your floodgate key isn't the same between the installs of the plugin (please copy them so they all use the same key)."]}),"\n",(0,i.jsx)(n.h2,{id:"javalangillegalstateexception-cannot-reply-to-encryptionrequestpacket-without-profile-and-access-token",children:(0,i.jsx)(n.code,{children:"java.lang.IllegalStateException: Cannot reply to EncryptionRequestPacket without profile and access token."})}),"\n",(0,i.jsx)(n.p,{children:"Make sure the server has Floodgate installed and started up correctly. Otherwise, see if the next line fixes your error."}),"\n",(0,i.jsx)(n.h2,{id:"javaxcryptoaeadbadtagexception-tag-mismatch",children:(0,i.jsx)(n.code,{children:"javax.crypto.AEADBadTagException: Tag mismatch!"})}),"\n",(0,i.jsxs)(n.p,{children:["If Geyser and Floodgate are on the same server, shut down your server, delete the ",(0,i.jsx)(n.code,{children:"floodgate"})," plugin folder, delete any key file in the Geyser folder, and restart your server.\nIf Geyser and Floodgate are not on the same server and you had to copy the key file, this could also be an error related to uploading through FTP. Using ASCII will not work here, and you need to make sure you're on binary when uploading. We recommend using ",(0,i.jsx)(n.a,{href:"https://winscp.net",children:"WinSCP"})," if you need to use FTP."]}),"\n",(0,i.jsx)(n.h2,{id:"javalangnumberformatexception-for-input-string-",children:'java.lang.NumberFormatException: For input string: ""'}),"\n",(0,i.jsx)(n.p,{children:"You're trying to log in without an Xbox account. Floodgate requires an Xbox account to authenticate the Bedrock player."}),"\n",(0,i.jsx)(n.h2,{id:"geyser-floodgate51777-lost-connection-internal-exception-javalangnumberformatexception-for-input-string-sfqdxv36-or-a-similar-error",children:'Geyser-Floodgate:51777 lost connection: Internal Exception: java.lang.NumberFormatException: For input string: "SfqdXv36" (or a similar error)'}),"\n",(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"ip-forwarding"})," in your BungeeCord to ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"please-connect-through-the-official-geyser-disconnect-message",children:'"Please connect through the official Geyser" disconnect message'}),"\n",(0,i.jsx)(n.p,{children:"Ensure that Floodgate and Geyser are both up-to-date."}),"\n",(0,i.jsx)(n.h2,{id:"prefix-is-not-changing-on-the-server-after-changing-it-in-the-config",children:"Prefix is not changing on the server after changing it in the config."}),"\n",(0,i.jsx)(n.p,{children:"Between the Paper builds of 1.15.2-355 and 1.16.5-505, there was a bug where Floodgate players who had already connected to the server would not have their prefixed changed. Paper builds 1.16.5-506 and later fix this issue."}),"\n",(0,i.jsxs)(n.p,{children:["Ensure that you removed the ",(0,i.jsx)(n.code,{children:"usercache.json"})," file from the server root directory and restart your server."]}),"\n",(0,i.jsx)(n.h2,{id:"issues-with-luckperms-and-prefixes",children:"Issues with LuckPerms and prefixes"}),"\n",(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"allow-invalid-usernames"})," to ",(0,i.jsx)(n.code,{children:"true"})," in LuckPerms' config."]}),"\n",(0,i.jsx)(n.h2,{id:"failed-to-verify-username-with-paper",children:"Failed to verify username! (with Paper)"}),"\n",(0,i.jsxs)(n.p,{children:["To completely mitigate this issue, disable ",(0,i.jsx)(n.code,{children:"perform-username-validation"})," in the ",(0,i.jsxs)(n.a,{href:"https://docs.papermc.io/paper/reference/global-configuration#unsupported_settings",children:["unsupported settings of the ",(0,i.jsx)(n.code,{children:"config/paper-global.yml"})," file"]})," (",(0,i.jsx)(n.code,{children:"paper.yml"})," in the root server folder on servers below 1.19). Using Floodgate on the backend servers will also mitigate this issue."]}),"\n",(0,i.jsx)(n.h2,{id:"error-with-forge-or-fabric-bukkit-hybrid",children:"Error with Forge or Fabric Bukkit Hybrid"}),"\n",(0,i.jsx)(n.p,{children:"At this time, there is no way to run Floodgate on servers that mix Forge and Bukkit or Fabric and Bukkit (For example: Magma, Mohist, and Cardboard/Bukkit4Fabric) - most hybrids do not support the complicated procedures we need to do in order to allow Bedrock players to connect (for the technically minded: these server softwares typically don't support NMS)."}),"\n",(0,i.jsx)(n.p,{children:"If you wish to use Floodgate in combination with hybrid servers, we recommend putting these servers behind a BungeeCord or Velocity proxy, and running Floodgate on the proxy."}),"\n",(0,i.jsx)(n.h2,{id:"after-enabling-global-linking-in-offline-mode-player-data-is-not-synced-between-java-and-bedrock-players",children:"After enabling global linking in offline mode, player data is not synced between Java and Bedrock players."}),"\n",(0,i.jsx)(n.p,{children:"This occurs in offline mode because the UUID of the Java account linked to the Bedrock account does not match the online mode UUID returned by Floodgate's global linking server."}),"\n",(0,i.jsxs)(n.p,{children:["When using global linking, ensure ",(0,i.jsx)(n.code,{children:"online-mode"})," in ",(0,i.jsx)(n.code,{children:"server.properties"})," is set to ",(0,i.jsx)(n.code,{children:"true"}),". Otherwise, Bedrock players will not be authenticated with the same UUID they receive when playing on Java Edition, resulting in lost progress. This does not occur with local linking."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var t=o(96540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);